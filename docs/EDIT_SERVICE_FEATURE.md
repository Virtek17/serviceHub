# Функция редактирования услуг

## Реализованные компоненты

### EditServiceModal

**Путь:** `src/components/modals/EditServiceModal.jsx`

Модальное окно для редактирования услуги с полями:

- Название услуги (обязательное)
- Описание (опциональное)
- Цена в рублях (обязательное)
- Длительность в минутах (обязательное)

**Props:**

- `isOpen` - флаг открытия модалки
- `onClose` - функция закрытия
- `service` - объект редактируемой услуги
- `onSave` - функция сохранения с данными формы
- `isLoading` - флаг загрузки при сохранении

## Интеграция

### ProviderDashboardPage

Добавлено:

1. Состояние `editingService` - текущая редактируемая услуга
2. Состояние `isSaving` - флаг процесса сохранения
3. Функция `handleEditService` - открывает модалку с выбранной услугой
4. Функция `handleSaveService` - сохраняет изменения через API
5. Компонент `EditServiceModal` в конце JSX

### usePerformerServicesFlat Hook

Обновлена функция `editService`:

- Вызывает API для обновления в БД
- Обновляет локальное состояние без перезагрузки
- Обрабатывает ошибки

## Как это работает

1. Пользователь нажимает на иконку редактирования в карточке услуги
2. Открывается модальное окно с заполненными данными
3. Пользователь редактирует поля
4. При нажатии "Сохранить":
   - Отправляется запрос в Supabase
   - Обновляется локальное состояние
   - Закрывается модалка
   - Показывается уведомление об успехе
5. Изменения видны сразу без перезагрузки страницы

## API

### updateService

**Путь:** `src/Api/services.js`

```javascript
updateService(serviceId, {
  name: string,
  description: string,
  price: number,
  duration: number,
  category_id: number, // опционально
});
```

Обновляет запись в таблице `services` в Supabase.

## Валидация

- Название услуги - обязательное поле
- Цена - обязательное, только положительные числа
- Длительность - обязательное, только положительные числа
- Описание - опциональное

## Улучшения для будущего

1. Добавить возможность изменения категории услуги
2. Добавить валидацию на стороне клиента (React Hook Form + Zod)
3. Добавить подтверждение перед закрытием с несохранёнными изменениями
4. Добавить toast-уведомления вместо alert
5. Добавить оптимистичное обновление UI
